System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var t,e,n,s,o,a,r,i,c,d,l,u,m,p,g,f,h;return{setters:[function(i){t=i.r,e=i.q,n=i.o,s=i.l,o=i.n,a=i.a,r=i.m},function(t){i=t.I,c=t.U,d=t.o,l=t.a,u=t.R,m=t._,p=t.n,g=t.V,f=t.T,h=t.b}],execute:function(){async function j(t,n,s){const o=e(document,t),a=e(document,n);function r(t){a.hidden=t,a.open=!1,o.hidden=!t}let d;r(!0);try{d=await s.json()}catch(u){return r(!1),void i()}const l=d.json;try{await c(l.job_url)}catch(u){return r(!1),void i()}r(!1),window.location=l.export_url}async function v(t){await function(t){return new Promise((function(e){function n(){t.hasFocus()&&(e(),t.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n),window.removeEventListener("blur",n))}t.addEventListener("visibilitychange",n),window.addEventListener("focus",n),window.addEventListener("blur",n),n()}))}(document),await new Promise(t=>setTimeout(t,1e3)),t instanceof HTMLButtonElement&&(t.disabled=!1)}function L(t){t.preventDefault()}t(".js-audit-log-export-form",(async function(t,e){await j(".js-audit-log-exporting",".js-audit-log-export-menu",e)})),t(".js-audit-log-git-event-export-form",(async function(t,e){await j(".js-audit-log-git-event-exporting",".js-audit-log-git-event-export-menu",e)})),n("#js-oauth-authorize-btn",t=>{v(t)}),n("#js-manual-authorize-redirect",t=>{!async function(t){t.addEventListener("click",L),t.classList.add("text-gray"),await new Promise(t=>setTimeout(t,3e3)),t.classList.remove("text-gray"),t.removeEventListener("click",L)}(t)}),t(".js-toggler-container .js-set-approval-state",(async function(t,e){const n=s(t,".js-toggler-container");n.classList.add("loading");const o=await e.json();"approved"===o.json.approval_state?n.classList.add("on"):"denied"===o.json.approval_state&&(n.classList.add("revoked"),n.classList.remove("on")),n.classList.remove("loading")})),t(".js-request-access-approval-form",(async function(t,n){await n.text();const s=o(t,"data-container-id");e(document,`#${s}`).classList.add("on")})),a("details-menu-selected",".js-select-plan-menu",(function(t){const e=t.detail.relatedTarget,n=document.querySelectorAll(".js-plan-card-section");for(const r of n)r instanceof HTMLElement&&(r.hidden=!0);const s=t.currentTarget.querySelectorAll("[role^=menuitem]"),o=Array.from(s).indexOf(e),a=Array.from(n)[o];a instanceof HTMLElement&&(a.hidden=!1)}),{capture:!0}),n(".js-suggested-usernames-container",(function(t){const e=r(t,".js-suggested-username",HTMLInputElement),n=document.querySelector(".js-signup-form");if(n&&0!==e.length)for(const s of e)n.appendChild(s)})),d(".js-email-notice-trigger",(function(t){const e=r(document,".js-email-notice");for(const n of e)n.classList.add("notice-highlight");t.addEventListener("blur",(function(){for(const t of e)t.classList.remove("notice-highlight")}))})),n(".js-plan-choice:checked",{add(t){const e=t.closest(".plan-row");e&&e.classList.add("selected")},remove(t){const e=t.closest(".plan-row");e&&e.classList.remove("selected")}});const b=new WeakMap;function w(t){const n=t.target,o=s(n,"form");if(n.closest("input[type=text]")&&!b.get(o)){const t=e(o,".js-signup-source",HTMLInputElement);let n=t.value;t.hasAttribute("data-ga-label")&&(n=`${n}${t.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Attempt",label:n}),b.set(o,!0)}}function y(){const t=e(document,".js-password-with-confirmation",HTMLInputElement),n=e(document,".js-password-confirm",HTMLInputElement);n.value!==t.value?function(t){const e=s(t,".js-form-group");e.classList.add("errored");const n=t.getAttribute("data-validity-message");if(n){t.setCustomValidity(n);const e=s(t,"form",HTMLFormElement);g(e)}const o=e.querySelector(".error"),a=t.getAttribute("data-error-message");if(!o&&a){const t=document.createElement("dd");t.classList.add("error"),t.innerHTML=a,e.appendChild(t)}}(n):function(t){const e=s(t,".js-form-group");t.setCustomValidity(""),e.classList.remove("errored");const n=s(t,"form",HTMLFormElement);g(n);const o=e.querySelector(".error");o&&e.removeChild(o)}(n)}function E(t,e,n){const s=t.getBoundingClientRect().height,o=e.getBoundingClientRect(),a=n.getBoundingClientRect();let r=a.top;r+o.height+10>=s&&(r=Math.max(s-o.height-10,0));let i=a.right;null!=n.closest(".js-build-status-to-the-left")&&(i=Math.max(a.left-o.width-10,0)),e.style.top=`${r}px`,e.style.left=`${i}px`,e.style.right="auto"}async function T(t){const e=t.querySelector(".js-dropdown-details"),n=t.querySelector(".js-status-dropdown-menu")||t.closest(".js-status-dropdown-menu");if(!(n instanceof HTMLElement))return;const s=n.querySelector(".js-status-loader");if(!s)return;const o=n.querySelector(".js-status-loading"),a=n.querySelector(".js-status-error"),r=s.getAttribute("data-contents-url");let i;o.classList.remove("d-none"),a.classList.add("d-none");try{await f(),i=await h(document,r)}catch(c){o.classList.add("d-none"),a.classList.remove("d-none")}i&&(s.replaceWith(i),n.querySelector(".js-details-container").classList.add("open"),e&&n.classList.contains("js-append-menu-to-body")&&E(document.body,n,e))}function q(t){T(t.currentTarget)}n(".js-signup-form",{subscribe:t=>l(t,"input",w)}),a("submit",".js-signup-form-submit",(function(t){const n=t.currentTarget,s=e(n,".js-signup-source",HTMLInputElement);let o=s.value;s.hasAttribute("data-ga-label")&&(o=`${o}${s.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Submit",label:o})})),a("submit",".js-org-survey",(function(t){const e=t.currentTarget,n=r(e,".js-other-text",HTMLInputElement);for(const s of n){const t=m(s,"js-other-hidden-input");t instanceof HTMLInputElement&&(t.checked=s.value.length>0)}})),n(".js-show-next-question-trigger:checked",{constructor:HTMLElement,add(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=m(e,"js-hidden-question");t&&(t.hidden=!1)}},remove(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=m(e,"js-hidden-question");t&&(t.hidden=!0)}}}),n(".js-octocaptcha-parent",(function(t){const n=e(t,".js-octocaptcha-spinner"),s=e(t,".js-octocaptcha-success"),o=e(t,".js-octocaptcha-token",HTMLInputElement),a=e(t,".js-octocaptcha-form-submit",HTMLButtonElement),r=e(t,".js-octocaptcha-frame-container"),i=e(t,".js-octocaptcha-frame",HTMLIFrameElement),c=o.getAttribute("data-octocaptcha-url"),d=o.getAttribute("data-octocaptcha-timeout"),l=d?parseInt(d):3e4;let m=!1;const p=()=>{m||(m=!0,n.classList.add("d-none"),s.classList.remove("d-none"),f())},g=()=>{if(m)return;const e=document.createElement("input");e.type="hidden",e.id="error_loading_captcha",e.name="error_loading_captcha",e.value="1",t.appendChild(e),o.required=!1,p()},f=()=>{t.checkValidity()&&(a.disabled=!1)};setTimeout(g,l),i.addEventListener("error",g),window.addEventListener("message",t=>{if(t.origin!==c)return;const e=t.data&&t.data.event;var s;"captcha-loaded"===e?m||(m=!0,n.classList.add("d-none"),r.classList.remove("v-hidden","zero-height"),null===(s=i.contentWindow)||void 0===s||s.postMessage({event:"captcha-loaded-ack"},c||"")):"captcha-complete"===e?(o.value=t.data.sessionToken,(()=>{const t=r.getAttribute("data-ga-event-category");t&&u({category:t,action:"success",label:"captcha verified"})})(),f()):"captcha-suppressed"===e&&p()})})),n(".js-survey-answer-choice:checked",{add(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-black-fade","bg-white"),t.classList.add("border-blue","bg-blue-light"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(n.hidden=!1)},remove(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-blue","bg-blue-light"),t.classList.add("border-black-fade","bg-white"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(n.hidden=!0)}}),n(".js-allow-multiple:checked",{constructor:HTMLInputElement,add(t){const e=parseInt(t.getAttribute("data-max-choices")||""),n=s(t,".js-question"),o=r(n,".js-allow-multiple",HTMLInputElement);if(o.filter(t=>!0===t.checked).length>=e)for(const s of o)!1===s.checked&&(s.disabled=!0)},remove(t){const e=s(t,".js-question");for(const n of r(e,".js-allow-multiple",HTMLInputElement))n.disabled=!1}}),p("keyup",".js-password-with-confirmation",()=>{""!==e(document,".js-password-confirm",HTMLInputElement).value&&y()}),p("keyup",".js-password-confirm",y),a("toggle",".js-build-status .js-dropdown-details",(function(t){const e=t.currentTarget,n=e.querySelector(".js-status-dropdown-menu");function s(){e.hasAttribute("open")||a()}function o(t){n.contains(t.target)||a()}function a(){e.removeAttribute("open"),n.classList.add("d-none"),e.appendChild(n),e.removeEventListener("toggle",s),window.removeEventListener("scroll",o)}n&&(e.addEventListener("toggle",s),n.classList.contains("js-close-menu-on-scroll")&&window.addEventListener("scroll",o,{capture:!0}),n.classList.remove("d-none"),n.querySelector(".js-details-container").classList.add("open"),n.classList.contains("js-append-menu-to-body")&&(document.body.appendChild(n),E(document.body,n,e)))}),{capture:!0}),a("click",".js-status-retry",({currentTarget:t})=>{T(t)}),n(".js-build-status",{add(t){t.addEventListener("mouseenter",q,{once:!0})},remove(t){t.removeEventListener("mouseenter",q)}}),a("upload:setup",".js-upload-enterprise-installation-user-accounts-upload",(function(t){const{form:e}=t.detail,n=t.currentTarget.getAttribute("data-business-id");n&&e.append("business_id",n);const s=t.currentTarget.getAttribute("data-enterprise-installation-id");s&&e.append("enterprise_installation_id",s)})),a("upload:complete",".js-upload-enterprise-installation-user-accounts-upload",(function(t){const{attachment:e}=t.detail,n=t.currentTarget.querySelector(".js-enterprise-installation-user-accounts-upload-id");n.value=e.id;const s=t.currentTarget.querySelector(".js-enterprise-installation-id"),o=t.currentTarget.getAttribute("data-enterprise-installation-id");o&&(s.value=o);const a=n.form;a&&a.submit()}))}}}));
//# sourceMappingURL=github-e7cf182b.js.map
